(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,n){e.exports=n(95)},32:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){},53:function(e,t,n){},55:function(e,t,n){},57:function(e,t,n){},59:function(e,t,n){},61:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(24),r=n.n(s),o=(n(32),n(2)),l=n(3),u=n(7),i=n(4),d=n(6),m=n(5),h=(n(39),n(41),{getMessages:function(e){return{type:"GET_MESSAGES",messages:[e]}},setLabels:function(e){return{type:"SET_LABELS",labels:e}},selectLabel:function(e){return{type:"SELECT_LABEL",label:e}},setMessages:function(e,t,n){return{type:"SET_MESSAGES",account:e.address,label:t,messages:n}},selectMessage:function(e){return{type:"SELECT_MESSGAE",currentMsg:e}},setAccounts:function(e){return{type:"SET_ACCOUNTS",accounts:e}},selectAccount:function(e){return{type:"SELECT_ACCOUNT",selected:e}},hideAddAccount:function(){return{type:"HIDE_ADD_ACCOUNT"}},showAddAccount:function(){return{type:"SHOW_ADD_ACCOUNT"}},search:function(e){return{type:"SEARCH",keyword:e}}}),b=n(14),p={accounts:[{address:"0",messages:{INBOX:[]},type:"TEST"}],select_account:{address:"0",messages:{INBOX:[]},type:"TEST"},messages:{INBOX:[],SENT:[]},labels:["INBOX"],select_label:"INBOX",currentMsg:{subject:"Brunch at the Barn",from:"Miss Quinn",to:"to Debra Suarez",body:"Hey friends,<br/> What do you think about having a brunch on Sunday.<br/><br/> Cheers!.",logo:null},addAccount:!0,keyword:""};var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;if("OPEN_MESSAGE"===t.type)return Object.assign(e,{currentMsg:e.messages[t.msgId]});if("GET_MESSAGES"===t.type)return{currentMsg:JSON.parse(t.messages[0])};if("SET_LABELS"===t.type){var n=Object.assign([],e);return n.labels=t.labels,n}if("SELECT_LABEL"===t.type){var a=Object.assign([],e);return a.select_label=t.label,a.keyword="",a}if("SELECT_MESSGAE"===t.type){var c=Object.assign([],e);return c.currentMsg=t.currentMsg,c}if("SET_MESSAGES"===t.type){var s=Object.assign([],e);return s[t.account].messages[t.label]=t.messages,s}if("SET_ACCOUNTS"===t.type){var r=Object.assign([],e);return r.accounts=t.accounts,t.accounts.forEach(function(e){r[e.address]={messages:{}}}),r.addAccount=t.accounts.size>0,r}if("SELECT_ACCOUNT"===t.type){var o=Object.assign([],e);return o.select_account=t.selected,o.keyword="",o.labels=t.selected.labels,o.messages=o[t.selected.address].messages,o}if("HIDE_ADD_ACCOUNT"===t.type){var l=Object.assign([],e);return l.addAccount=!1,l}if("SHOW_ADD_ACCOUNT"===t.type){var u=Object.assign([],e);return u.addAccount=!0,u}if("SEARCH"===t.type){var i=Object.assign([],e);return i.keyword=t.keyword,t.keyword=t.keyword.toLowerCase(),i.messages=Object.assign([],e.messagges),i.messages[e.select_label]=i[e.select_account.address].messages[e.select_label].filter(function(e){var n=e.subject+e.from+e.to+e.body;return!!(n=n.toLowerCase()).includes(t.keyword)}),i}return e},g=Object(b.b)(f,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());function E(e){for(var t=0,n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);return t}var O={accountFetch:function(){fetch("http://localhost:8888/accounts/").then(function(e){return e.json()}).then(function(e){g.dispatch(h.setAccounts(e)),e.map(function(e){e.labels.map(function(t){fetch("http://localhost:8888/"+e.address+"/messages/"+t).then(function(e){return e.json()}).then(function(n){g.dispatch(h.setMessages(e,t,n))}).then(function(){g.dispatch(h.selectAccount(e))})})})})},logoColor:function(e){return function(e){var t=(10547360&e).toString(16).toUpperCase();return"000000".substring(0,6-t.length)+t}(E(e))},accountColor:function(e){var t=(8421616&E(e)).toString(16).toUpperCase();return"000000".substring(0,6-t.length)+t}},y=function(e){function t(e){var n;Object(o.a)(this,t),n=Object(u.a)(this,Object(i.a)(t).call(this,e));var a=e.account.address.charAt(0).toUpperCase();return n.state={account:e.account,letter:a},n.state.logoColor=O.accountColor(e.account.address),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t={backgroundColor:"#"+this.state.logoColor};return c.a.createElement("div",{className:"account-icon",onClick:function(){return e.props.selectAccount({selected:e.props.account})},style:t},"                ",this.state.letter)}}]),t}(a.Component),v=Object(m.b)(null,function(e){return{selectAccount:function(t){var n=t.selected;return e(h.selectAccount(n))}}})(y),j=(n(43),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"account-icon add-icon",onClick:this.props.showAddAccount},"+")}}]),t}(a.Component)),C=Object(m.b)(null,function(e){return{showAddAccount:function(){return e(h.showAddAccount())}}})(j),S=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"accounts column",key:this.props.key},this.props.accounts.map(function(e){return c.a.createElement(v,{account:e,key:e.address})}),c.a.createElement(C,null))}}]),t}(a.Component),k=Object(m.b)(function(e){return{accounts:e.accounts}})(S),A=(n(45),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleClick",value:function(e){this.props.selectLabel({selected:e})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"labels"},this.props.labels.map(function(t){var n=t.charAt(0).toUpperCase()+t.substr(1).toLowerCase();return c.a.createElement("div",{className:"label",key:t,onClick:function(){return e.handleClick(t)}},n)}))}}]),t}(a.Component)),N=Object(m.b)(function(e){return{labels:e.labels,size:e.labels.size}},function(e){return{selectLabel:function(t){var n=t.selected;return e(h.selectLabel(n))}}})(A),_=(n(47),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.type.charAt(0).toUpperCase()+this.props.type.substr(1).toLowerCase();return c.a.createElement("div",{className:"account-label"},c.a.createElement("div",{className:" account-type"},e," "),c.a.createElement("div",{className:" account-name"},this.props.name," "))}}]),t}(a.Component)),w=(n(49),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"label-col column",key:this.props.key},c.a.createElement(_,{type:this.props.account.type,name:this.props.account.address}),c.a.createElement(N,null))}}]),t}(a.Component)),T=Object(m.b)(function(e){return{account:e.select_account}})(w),M=n(8),L=(n(51),function(e){function t(e){var n;if(Object(o.a)(this,t),(n=Object(u.a)(this,Object(i.a)(t).call(this,e))).state={msg:e.msg},n.state.msg.snippet=n.state.msg.snippet.substr(0,40)+" ....",null==n.state.msg.logo){var a=n.state.msg.from.trim().search("[A-Za-z]"),c=n.state.msg.from.trim().charAt(a).toUpperCase();n.state.msg.logo=c}return n.state.msg.logoColor=O.logoColor(n.state.msg.from),n.handleClick=n.handleClick.bind(Object(M.a)(Object(M.a)(n))),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleClick",value:function(){this.props.selectMessage({selected:this.state.msg})}},{key:"render",value:function(){var e={backgroundColor:"#"+this.state.msg.logoColor},t={backgroundColor:"#FFF"};return this.state.msg==this.props.selected&&(t.backgroundColor="#0037ff1f"),c.a.createElement("div",{className:"message-label",onClick:this.handleClick,style:t},c.a.createElement("div",{className:"logo",style:e}," ",this.state.msg.logo," "),c.a.createElement("span",{className:"sender"},this.state.msg.from),c.a.createElement("span",{className:"title"},this.state.msg.subject),c.a.createElement("span",{className:"snippet",dangerouslySetInnerHTML:{__html:this.state.msg.snippet}}))}}]),t}(a.Component)),I=Object(m.b)(null,function(e){return{selectMessage:function(t){var n=t.selected;return e(h.selectMessage(n))}}})(L),U=(n(53),function(e){function t(e){return Object(o.a)(this,t),Object(u.a)(this,Object(i.a)(t).call(this,e))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=window.innerHeight,t={maxHeight:e-=50},n=this.props.selected;return c.a.createElement("div",{className:"messages column",key:this.props.key,style:t},this.props.messages.map(function(e,t){return c.a.createElement(I,{key:e.id,msg:e,selected:n})}))}}]),t}(a.Component)),D=Object(m.b)(function(e){return void 0==e.messages[e.select_label]?{messages:[],selected:{}}:{messages:e.messages[e.select_label],selected:e.currentMsg}})(U),z=(n(55),Object(m.b)(function(e){var t="#"+O.logoColor(e.currentMsg.from);if(null==e.currentMsg.logo){var n=e.currentMsg.from.trim().charAt(0).toUpperCase();return{msg:Object.assign(e.currentMsg,{logo:n}),logoColor:{backgroundColor:t,color:"white"}}}return{msg:e.currentMsg,logoColor:{backgroundColor:t,color:"white"}}})(function(e){var t=e.msg,n=e.logoColor;return c.a.createElement("div",{className:"message-view column"},c.a.createElement("div",{className:"title-bar"}," ",t.subject),c.a.createElement("div",{className:"message"},c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"logo",style:n},t.logo," "),c.a.createElement("span",{className:"sender"},t.from),c.a.createElement("span",{className:"reciever"},t.to)),c.a.createElement("div",{className:"body-container"},c.a.createElement("iframe",{className:"body",dangerouslySetInnerHTML:{__html:t.body},srcDoc:t.body}))))})),B=(n(57),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(i.a)(t).call(this,e))).handleInput=n.handleInput.bind(Object(M.a)(Object(M.a)(n))),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleInput",value:function(e){this.props.search(e.target.value)}},{key:"render",value:function(){return c.a.createElement("div",{className:"top-bar"},c.a.createElement("span",{className:"compose-btn"},"Compose"),c.a.createElement("input",{className:"search",name:"",type:"text",placeholder:"Search",onChange:this.handleInput,value:this.props.keyword}))}}]),t}(a.Component)),G=Object(m.b)(function(e){return{keyword:e.keyword}},function(e){return{search:function(t){return e(h.search(t))}}})(B),H=(n(59),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(i.a)(t).call(this,e))).state={address:"",type:"GMAIL"},n.handleChange=n.handleChange.bind(Object(M.a)(Object(M.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(M.a)(Object(M.a)(n))),n.handleType=n.handleType.bind(Object(M.a)(Object(M.a)(n))),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){this.setState({address:e.target.value})}},{key:"handleType",value:function(e){this.setState({type:e.target.value})}},{key:"handleSubmit",value:function(e){this.props.hide();var t=window.open("about:blank","Auth");fetch("http://localhost:8888/account/",{method:"POST",body:JSON.stringify({address:this.state.address,type:this.state.type})}).then(function(e){return e.json()}).then(function(e){console.log(e),void 0!==e.url&&(t.location.href=e.url)})}},{key:"render",value:function(){return this.props.show?c.a.createElement("div",{className:"add-account modal"},c.a.createElement("div",{className:"dialog"},c.a.createElement("div",{className:"header"}," ",c.a.createElement("h1",null," New Account ")," "),c.a.createElement("div",{className:"dialog-body"},c.a.createElement("li",null,c.a.createElement("span",null,"Address "),c.a.createElement("input",{type:"text",value:this.state.address,onChange:this.handleChange})),c.a.createElement("li",null,c.a.createElement("span",null,"Type "),c.a.createElement("select",{onChange:this.handleType},c.a.createElement("option",{value:"GMAIL"}," GMail "),c.a.createElement("option",{value:"OUTLOOK"}," Outlook "))),c.a.createElement("input",{className:"submit-btn",type:"submit",value:"Add account",onClick:this.handleSubmit}),c.a.createElement("button",{className:"cancel-btn",onClick:this.props.hide}," Cancel")))):c.a.createElement("div",null," ")}}]),t}(a.Component)),X=Object(m.b)(function(e){return{show:e.addAccount}},function(e){return{hide:function(){return e(h.hideAddAccount())}}})(H),x=(n(61),n(13)),F=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return O.accountFetch(),c.a.createElement("div",{className:"App"},c.a.createElement(G,null),c.a.createElement(X,null),c.a.createElement("div",{className:"container"},c.a.createElement(x.a,{split:"vertical",minSize:0,defaultSize:"46px"},c.a.createElement(k,null),c.a.createElement(x.a,{split:"vertical",minSize:50,defaultSize:"15%"},c.a.createElement(T,null),c.a.createElement(x.a,{split:"vertical",minSize:50,defaultSize:"40%"},c.a.createElement(D,null),c.a.createElement(x.a,{split:"vertical",minSize:50,defaultSize:"100%"},c.a.createElement(z,null)))))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(m.a,{store:g},c.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[27,2,1]]]);
//# sourceMappingURL=main.bf531d3a.chunk.js.map